<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>American Pro Decking Deck Designer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="loading-cover">
        <div id="unity-loading-bar">
            <h2>American Pro Decking</h2>
            <div id="unity-progress-bar-empty">
                <div id="unity-progress-bar-full"></div>
            </div>
            <div class="spinner"></div>
        </div>
    </div>
    <div id="orientation-prompt" style="display: none;">
        <div class="prompt-content">
            <h2>Please Rotate Your Phone</h2>
            <p>For optimal performance, rotate to landscape mode.</p>
        </div>
    </div>
    <div id="container">
        <div id="sidebar">
            <h2>Deck Designer</h2>
            <div class="tab-buttons">
                <button class="tab-button active" onclick="openTab('deck-tab')">Deck</button>
                <button class="tab-button" onclick="openTab('materials-tab')">Materials</button>
                <button class="tab-button" onclick="openTab('environment-tab')">Environment</button>
                <button class="tab-button" onclick="openTab('furniture-tab')">Furniture</button>
                <button class="tab-button" onclick="openTab('results-tab')">Results</button>
            </div>
            <div id="deck-tab" class="tab-content active">
                <h3>Deck Settings</h3>
                <div class="input-group">
                    <label>Shape:
                        <select id="deckShape" onchange="updateShapeInputs()" aria-label="Choose deck shape" title="Choose deck shape">
                            <option value="rectangular">Rectangular</option>
                            <option value="l-shaped">L-Shaped</option>
                            <option value="t-shaped">T-Shaped</option>
                            <option value="multi-level">Multi-Level</option>
                        </select>
                    </label>
                    <label>Main Width:
                        <input type="number" id="widthFeet" min="0" value="12" aria-label="Main deck width in feet" title="Main deck width (feet)"> ft
                        <input type="number" id="widthInches" min="0" max="11" value="0" aria-label="Main deck width in inches" title="Main deck width (inches)"> in
                    </label>
                    <label>Main Length:
                        <input type="number" id="lengthFeet" min="0" value="12" aria-label="Main deck length in feet" title="Main deck length (feet)"> ft
                        <input type="number" id="lengthInches" min="0" max="11" value="0" aria-label="Main deck length in inches" title="Main deck length (inches)"> in
                    </label>
                    <div id="wing-inputs" style="display: none;">
                        <label>Wing Width:
                            <input type="number" id="wingWidthFeet" min="0" value="6" aria-label="Wing width in feet" title="Wing width (feet)"> ft
                            <input type="number" id="wingWidthInches" min="0" max="11" value="0" aria-label="Wing width in inches" title="Wing width (inches)"> in
                        </label>
                        <label>Wing Length:
                            <input type="number" id="wingLengthFeet" min="0" value="6" aria-label="Wing length in feet" title="Wing length (feet)"> ft
                            <input type="number" id="wingLengthInches" min="0" max="11" value="0" aria-label="Wing length in inches" title="Wing length (inches)"> in
                        </label>
                    </div>
                    <div id="multi-level-inputs" style="display: none;">
                        <label>Second Level Width:
                            <input type="number" id="secondWidthFeet" min="0" value="6" aria-label="Second level width in feet" title="Second level width (feet)"> ft
                            <input type="number" id="secondWidthInches" min="0" max="11" value="0" aria-label="Second level width in inches" title="Second level width (inches)"> in
                        </label>
                        <label>Second Level Length:
                            <input type="number" id="secondLengthFeet" min="0" value="6" aria-label="Second level length in feet" title="Second level length (feet)"> ft
                            <input type="number" id="secondLengthInches" min="0" max="11" value="0" aria-label="Second level length in inches" title="Second level length (inches)"> in
                        </label>
                        <label>Second Height Offset:
                            <input type="number" id="secondHeightOffset" min="1" value="1" aria-label="Second level height offset in feet" title="Second level height offset (feet)"> ft
                        </label>
                    </div>
                    <label>Height:
                        <input type="number" id="deckHeight" min="0" value="1" aria-label="Deck height above ground in feet" title="Deck height above ground (feet)"> ft
                    </label>
                    <label>Board Length:
                        <select id="boardLength" aria-label="Select board length" title="Select board length">
                            <option value="144">12 ft</option>
                            <option value="192">16 ft</option>
                            <option value="240">20 ft</option>
                            <option value="auto">Auto-Optimize</option>
                        </select>
                    </label>
                    <label>Board Direction:
                        <select id="boardDirection" aria-label="Choose board orientation" title="Choose board orientation">
                            <option value="horizontal">Horizontal</option>
                            <option value="vertical">Vertical</option>
                        </select>
                    </label>
                    <label>Board Pattern:
                        <select id="boardPattern" aria-label="Choose board pattern" title="Choose board pattern">
                            <option value="standard">Standard</option>
                            <option value="diagonal">Diagonal</option>
                        </select>
                    </label>
                    <label>Picture Frame:
                        <input type="checkbox" id="pictureFrame" aria-label="Add a border around the deck" title="Add a border around the deck">
                    </label>
                    <label>Railings:
                        <input type="checkbox" id="railings" aria-label="Add railings to the deck" title="Add railings to the deck">
                    </label>
                    <label>Stairs:
                        <input type="checkbox" id="stairs" aria-label="Add stairs to the deck" title="Add stairs to the deck">
                    </label>
                    <label>Stair Steps:
                        <input type="number" id="stairSteps" min="1" value="3" aria-label="Number of stair steps" title="Number of stair steps">
                    </label>
                    <label>Stair Width:
                        <input type="number" id="stairWidth" min="1" value="4" aria-label="Stair width in feet" title="Stair width (feet)"> ft
                    </label>
                    <label>Stair Type:
                        <select id="stairType" aria-label="Choose stair type" title="Choose stair type">
                            <option value="straight">Straight</option>
                            <option value="spiral">Spiral</option>
                        </select>
                    </label>
                    <label>Show Dimensions:
                        <input type="checkbox" id="showDimensions" checked aria-label="Display measurement labels" title="Display measurement labels">
                    </label>
                    <button onclick="buildDeck()">Build Deck</button>
                    <button onclick="undo()">Undo</button>
                    <button onclick="redo()">Redo</button>
                </div>
            </div>
            <div id="materials-tab" class="tab-content">
                <h3>Materials</h3>
                <div class="input-group">
                    <label>Board Color:
                        <select id="boardColor" onchange="updateMaterials()" aria-label="Select decking color" title="Select decking color">
                            <option value="#8b4513">Cedar</option>
                            <option value="#5c4033">Walnut</option>
                            <option value="#a0522d">Mahogany</option>
                        </select>
                    </label>
                    <label>Railing Style:
                        <select id="railingStyle" aria-label="Select railing style" title="Select railing style">
                            <option value="standard">Standard</option>
                            <option value="cable">Cable</option>
                        </select>
                    </label>
                </div>
            </div>
            <div id="environment-tab" class="tab-content">
                <h3>Environment</h3>
                <div class="input-group">
                    <label>Lighting:
                        <select id="lightingMode" onchange="updateLighting()" aria-label="Choose lighting mode" title="Choose lighting mode">
                            <option value="day">Day</option>
                            <option value="night">Night</option>
                        </select>
                    </label>
                    <label>Camera View:
                        <select id="cameraView" onchange="setCameraView()" aria-label="Select camera perspective" title="Select camera perspective">
                            <option value="default">Default</option>
                            <option value="top">Top-Down</option>
                            <option value="side">Side</option>
                            <option value="underside">Underside</option>
                        </select>
                    </label>
                </div>
            </div>
            <div id="furniture-tab" class="tab-content">
                <h3>Furniture</h3>
                <div class="input-group">
                    <button onclick="addChair()">Add Chair</button>
                    <button onclick="addTable()">Add Table</button>
                </div>
            </div>
            <div id="results-tab" class="tab-content">
                <h3>Design Summary</h3>
                <pre id="design-summary"></pre>
            </div>
            <div class="input-group">
                <button onclick="exportDesign()" title="Export design as JSON and PDF">Export Design</button>
                <input type="file" id="importJSON" onchange="importDesignJSON(event)" title="Import JSON Design">
                <button onclick="showHelp()" title="View help and FAQ">Help/FAQ</button>
            </div>
        </div>
        <div id="canvas-container"></div>
    </div>
    <div id="prompt">
        <h3>Welcome to American Pro Decking Designer</h3>
        <p>Answer a few questions to start, or skip to manual design.</p>
        <div id="prompt-questions"></div>
        <button onclick="nextPrompt()">Next</button>
        <button onclick="skipPrompt()">Skip</button>
    </div>
    <div id="tutorial" style="display: none;">
        <h3>Tutorial</h3>
        <p>Use mouse/touch to orbit, zoom, and pan. Drag boards to reposition (snaps to grid).</p>
        <p>Adjust settings in the sidebar tabs. Export designs via the Export Design button.</p>
        <button onclick="closeTutorial()">Close</button>
    </div>
    <div id="help" style="display: none;">
        <h3>Help/FAQ</h3>
        <p><b>How do I start?</b> Use the prompt or sidebar to set shape, size, and features.</p>
        <p><b>What is picture framing?</b> A border around the deck for aesthetics.</p>
        <p><b>Do I need permits?</b> Check local regulations; export a PDF blueprint to assist.</p>
        <p><b>Can I save designs?</b> Export as JSON to reload or PDF for sharing.</p>
        <p><b>Adding stairs/furniture?</b> Use deck tab for stairs, furniture tab for items.</p>
        <button onclick="closeHelp()">Close</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r165/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/loaders/RGBELoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/shaders/CopyShader.js"></script>
    <script src="script.js"></script>
</body>
</html>
